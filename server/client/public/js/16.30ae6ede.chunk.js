(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{478:function(e,t,n){"use strict";var a=n(118),r=n.n(a);var c=function(){var e=navigator.userAgent;return e.match(/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i)?"tablet":e.match(/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/)?"mobile":"desktop"};var l=function(e){var t=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),n=function(){},a={},r=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;function c(t){a[t]||e(t),a[t]=!0}t.createDataChannel(""),t.createOffer().then((function(e){e.sdp.split("\n").forEach((function(e){e.indexOf("candidate")<0||e.match(r).forEach(c)})),t.setLocalDescription(e,n,n)})).catch((function(e){})),t.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.match(r)&&e.candidate.candidate.match(r).forEach(c)}};t.a=function(){var e=r.a.connect("/pageview",{transports:["websocket"],upgrade:!1});return e.on("connect",(function(){})),e.on("visitorConnected",(function(){var t={pageviewUrl:window.location.pathname,httpReferer:document.referrer,deviceType:c()};l((function(n){t.ip||(t.ip=n,fetch("/api/pageview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){e.emit("viewData",t.data)})))}))})),e}},479:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(65),l=n(10),o=n(156);function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(n){var a=n.identifier,c=i(n,["identifier"]);return a?a.NotAuthorizedError?(o.a.push("/sign-in"),r.a.createElement("div",null,"Redirecting...")):a.FetchError?r.a.createElement(l.a,{text:"Unable to fetch data. Try again"}):a.name||t?a.text||!a.name&&t?r.a.createElement(e,c):r.a.createElement(l.a,null):(o.a.push("/settings/profile"),r.a.createElement("div",null,"Redirecting...")):r.a.createElement(l.a,null)}function a(e){return{identifier:e.identifier}}return Object(c.b)(a,null)(r.a.memo(n))}},480:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(){return r.a.createElement("div",{className:"spinner"})}},481:function(e,t,n){"use strict";t.a=function(e){var t,n=!1;Number(e)<0&&(n=!0),t=n?Number(e).toString().split("").slice(1):Number(e).toString().split("");for(var a=[],r=0;t.length;)a.unshift(t.pop()),++r>=3&&(a.unshift(","),r=0);var c=a.join("").replace(/(^,|,$)/g,"");return n?"-"+c:c}},482:function(e,t,n){"use strict";t.a=n.p+"images/close.d8923f7e5736295380118610b2df9608.svg"},483:function(e,t,n){"use strict";t.a=function(e){var t=e.toString().length;return t<=3?e.toString():t<=5?(Math.floor(e/100)/10).toString()+"k":t<=6?Math.floor(e/1e3).toString()+"k":t<=8?(Math.floor(e/1e5)/10).toString()+"m":t<=9?Math.floor(e/1e6).toString()+"m":t<=11?(Math.floor(e/1e8)/10).toString()+"b":t<=12?Math.floor(e/1e9).toString()+"b":void 0}},486:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(null==e?void 0:e.length)>=t?e.substr(0,t-3)+"...":e}},503:function(e,t,n){"use strict";n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return m})),n.d(t,"c",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return v})),n.d(t,"n",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"d",(function(){return b})),n.d(t,"l",(function(){return w})),n.d(t,"a",(function(){return N})),n.d(t,"i",(function(){return _})),n.d(t,"m",(function(){return j}));var a=n(25),r=n(39);function c(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function l(){}function o(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function i(e){if(e&&e.then)return e.then(l)}function u(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var s=function(){return u((function(e){return i(o((function(){return c(fetch("/api/challenge"),(function(t){return c(t.json(),(function(t){e({type:a.g,payload:t})}))}))}),l))}))},m=function(){return u((function(e){return i(o((function(){return c(fetch("/api/challenge/start"),(function(t){return c(t.json(),(function(t){e({type:a.e,payload:t.data}),e({type:r.c})}))}))}),l))}))},f=function(){return u((function(e){return e({type:a.c}),c()}))},d=function(e){return u((function(t){return i(o((function(){return c(fetch("/api/challenge/".concat(e)),(function(e){return c(e.json(),(function(e){t({type:a.h,payload:e})}))}))}),l))}))},h=function(e,t){return u((function(n){return i(o((function(){return c(fetch("/api/challenge/play/".concat(e,"/").concat(t)),(function(e){return c(e.json(),(function(e){n({type:a.f,payload:"".concat(e.userId,"/").concat(e.gameId)})}))}))}),l))}))},g=function(){return u((function(e){try{e({type:a.b})}catch(e){}return c()}))},p=function(e,t){return u((function(n){return i(o((function(){return c(fetch("/api/challenge/game/".concat(e,"/").concat(t)),(function(e){return c(e.json(),(function(e){n({type:a.j,payload:e})}))}))}),l))}))},v=function(e,t){return u((function(n,l){return i(o((function(){var o=l().sockets.status;return o&&t&&o.emit("challenge-turn",{toUsername:t}),n({type:r.c,payload:"decrement"}),c(fetch("/api/challenge/gameAnalysis/challenge/".concat(e)),(function(e){return c(e.json(),(function(e){e.Error?n({type:a.k,payload:{Error:!0}}):n({type:a.k,payload:e})}))}))}),(function(){n({type:a.k,payload:{Error:!0}})})))}))},y=function(){return u((function(e){try{e({type:a.m})}catch(e){}return c()}))},E=function(){return u((function(e){return e({type:a.n}),c()}))},b=function(e){return u((function(t){return i(o((function(){return c(fetch("/api/challenge/results/".concat(e)),(function(n){t({type:a.d,payload:e})}))}),l))}))},w=function(e){return u((function(t){return i(o((function(){return c(fetch("/api/challenge/request/".concat(e),{method:"DELETE"}),(function(n){t({type:a.l,payload:e}),t({type:r.b,payload:"decrement"})}))}),l))}))},N=function(e){return u((function(t){return i(o((function(){return c(fetch("/api/challenge/request/".concat(e)),(function(n){return c(n.json(),(function(n){t({type:a.a,payload:{id:e,data:n}}),t({type:r.b,payload:"decrement"}),t({type:r.c})}))}))}),l))}))},_=function(){return u((function(e){return i(o((function(){return c(fetch("/api/friend/data/friends"),(function(t){return c(t.json(),(function(t){e({type:a.i,payload:t})}))}))}),l))}))},j=function(e){return u((function(t,n){return i(o((function(){return c(fetch("/api/challenge/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),(function(e){return c(e.json(),(function(e){if(e.Message){var t=n().sockets.status;if(t){var a=e.Message.split(" "),r=".."===a[a.length-1],c=JSON.parse(a[a.length-2]);r&&c.forEach((function(e){t.emit("challenge-request",{toUsername:e})}))}}}))}))}),l))}))}},505:function(e,t,n){"use strict";t.a=n.p+"images/user.4a895b672114f74207a1dd182ad35838.svg"},506:function(e,t,n){"use strict";t.a=n.p+"images/check.40ddaed01f9bba110c814ffd10826f9d.svg"},538:function(e,t,n){"use strict";n.p},539:function(e,t,n){"use strict";t.a=n.p+"images/cross.7210ee727be6d609a35275597b4a1d09.svg"},540:function(e,t,n){"use strict";t.a=n.p+"images/alone.fe9f3f1427c812170dd6675517d2e260.svg"},744:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(66),l=n(65);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var u=function(e){var t=e.content,n=e.setContent,c=o(Object(a.useState)(""),2);c[0],c[1];return r.a.createElement("input",{type:"text",value:t,onChange:function(e){n(e.target.value)},placeholder:"Search among your friends"})},s=n(156),m=n(503),f=n(481),d=n(479),h=n(483),g=n(478),p=n(10),v=n(480),y=(n(538),n.p+"images/gun.94e67408292f3c9c5404c05b93d1a4fe.svg"),E=n.p+"images/arm.8af50d1b25c89ac1b89477f02eb27c7a.svg",b=n(506),w=n(539),N=n(482),_=n(505),j=n(540),O=n(486);function S(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,c=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw c}}return n}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var T="CREATE_NEW_CHALLENGE",L="CHALLENGE_A_FRIEND",P="WARNING";t.default=Object(d.a)(Object(l.b)((function(e){return{challengeData:e.challenges.main,createChallengeData:e.challenges.create}}),{fetchChallengeData:m.g,createChallenge:m.e,closeResult:m.d,rejectRequest:m.l,acceptRequest:m.a,fetchFriends:m.i,sendChallengeFriendRequest:m.m,cleanCreateChallenge:m.c})((function(e){var t=e.challengeData,n=e.challengesReFetch,l=e.createChallengeData,o=e.fetchChallengeData,i=e.createChallenge,m=e.closeResult,d=e.rejectRequest,C=e.acceptRequest,q=e.fetchFriends,R=e.sendChallengeFriendRequest,D=e.cleanCreateChallenge,M=A(Object(a.useState)(!1),2),I=M[0],F=M[1],x=A(Object(a.useState)({show:!1,type:""}),2),W=x[0],U=x[1],J=A(Object(a.useState)([!1,""]),2),Y=J[0],G=J[1],$=A(Object(a.useState)([!1,""]),2),z=$[0],B=$[1],H=A(Object(a.useState)({bool:!1,type:"single",id:""}),2),K=H[0],Q=H[1],V=A(Object(a.useState)({}),2),X=V[0],Z=(V[1],A(Object(a.useState)([]),2)),ee=Z[0],te=Z[1],ne=A(Object(a.useState)(""),2),ae=ne[0],re=ne[1],ce=A(Object(a.useState)({showLoading:!1,loaded:!1}),2),le=ce[0],oe=ce[1],ie=A(Object(a.useState)(!1),2),ue=ie[0],se=ie[1],me=Object(a.useRef)(),fe=Object(a.useRef)(),de=Object(a.useRef)();function he(e,t){var n=t;return"online"===e.text?n+=" challenges--item__online":n+=" challenges--item__offline",n}function ge(e){Q({bool:!1,type:"single",id:e}),U({show:!0,type:P})}function pe(){U({show:!0,type:P}),Q({bool:!1,type:"all",id:""})}function ve(e){t&&t.challenges&&t.challenges.active.length+1>20?X&&null!=fe&&fe.current&&(fe.current.classList.add("active"),setTimeout((function(){fe.current.classList.remove("active")}),3e3)):(B([!0,e]),setTimeout((function(){C(e),se(!0)}),300))}function ye(e,t){t.preventDefault(),G([!0,e]),setTimeout((function(){m(e)}),300)}function Ee(){G([!0,"all"]),setTimeout((function(){m("all")}),300)}function be(e){function t(e,t){var n="challenges--results__item";return n+="win"===e?" challenges--item__won":"lose"===e?" challenges--item__lost":" challenges--item__draw",(Y[0]&&"all"===Y[1]||Y[0]&&t===Y[1])&&(n+=" close"),n}return e.map((function(e){var n=e._id,a=e.opponentInfo,l=e.home,o=e.away,i=e.result,u=e.url,s=e.endType;return r.a.createElement(c.a,{to:u?"/challenges/".concat(u):"#",className:t(i,n)},r.a.createElement("div",{className:he(a.status,"challenges--item__image-container")},r.a.createElement("img",{src:a.avatar,alt:"opponent"})),r.a.createElement("div",{className:"challenges--item__meta-data"},r.a.createElement("h3",{className:"challenges--item__name"},a.fullName),r.a.createElement("p",null,function(e,t,n,a){if("normal"===a){var r,c=e.gamesInRounds.reduce((function(e,t){return e+t.score}),0),l=t.gamesInRounds.reduce((function(e,t){return e+t.score}),0);if(c===l)return"you 1 - 1 opponent";if("win"===n&&c>l?r="home":"win"===n&&c<l&&(r="away"),"lose"===n&&c>l?r="away":"lose"===n&&c<l&&(r="home"),"home"===r&&c&&l)return"you ".concat(Object(h.a)(Math.ceil(c/l))," - ").concat(Object(h.a)(Math.ceil(l/c))," opponent");if("away"===r&&c&&l)return"you ".concat(Object(h.a)(Math.ceil(l/c))," - ").concat(Object(h.a)(Math.ceil(c/l))," opponent");if("home"===r)return"you ".concat(Object(h.a)(c)," - ").concat(Object(h.a)(l)," opponent");if("away"===r)return"you ".concat(Object(h.a)(l)," - ").concat(Object(h.a)(c)," opponent")}else if("time"===a)return"win"===n?"you won by time":"you lost on time"}(l,o,i,s))),r.a.createElement("div",{className:"challenges--item__status"},r.a.createElement("h2",null,function(e){return"win"===e?"WON":"lose"===e?"LOST":"DRAW"}(i))),r.a.createElement("img",{onClick:ye.bind(null,n),className:"challenges--item__close",src:N.a,alt:"close"}))}))}function we(e,t,n,a){var r,c=0,l=0;return e&&(c=e.gamesInRounds.reduce((function(e,t){return e+t.score}),0)),t&&(l=t.gamesInRounds.reduce((function(e,t){return e+t.score}),0)),0===c&&c===l?"you 0 - 0 opponent":c===l?"you 1 - 1 opponent":("home"===a&&n?r="home":"home"!==a||n||(r="away"),"away"===a&&n?r="away":"away"!==a||n||(r="home"),"home"===r&&c&&l?"you ".concat(Math.ceil(c/l)," - ").concat(Math.ceil(l/c)," opponent"):"away"===r&&c&&l?"you ".concat(Math.ceil(l/c)," - ").concat(Math.ceil(c/l)," opponent"):"home"===r?"you ".concat(c," - ").concat(l," opponent"):"away"===r?"you ".concat(l," - ").concat(c," opponent"):void 0)}Object(a.useEffect)((function(){document.title="Adasik - Challenges",o();var e=Object(g.a)();return function(){D(),e.disconnect()}}),[]),Object(a.useEffect)((function(){n&&n[0]&&o()}),[n]),Object(a.useEffect)((function(){t&&void 0!==t.requests&&se(!1)}),[t]),Object(a.useEffect)((function(){if(W.show&&W.type===T)return F(!1),setTimeout((function(){F(!0)}),2e3),function(){F(!1)};W.show&&W.type===P&&null!=me&&me.current&&me.current.classList.add("open"),W.show||W.type!==P||me.current.classList.remove("open"),W.show&&W.type===L&&q()}),[W]),Object(a.useEffect)((function(){K.bool&&"single"===K.type?(B([!0,K.id]),setTimeout((function(){d(K.id),se(!0)}),300)):K.bool&&"all"===K.type&&(B([!0,"all"]),setTimeout((function(){d("all"),se(!0)}),300))}),[K]),Object(a.useEffect)((function(){I&&W.show&&i()}),[I]),Object(a.useEffect)((function(){l&&s.a.push("/challenges/".concat(l.url))}),[l]);var Ne,_e,je;function Oe(e){if(e<=6e4)return"less than a minute ago";if(e>6e4&&e<36e5){if(window.innerWidth<=500)return"".concat((e/6e4).toFixed(0),"m ago");var t=(e/6e4).toFixed(0);return"".concat(t," minute").concat("1"===t.toString()?"":"s"," ago")}return e>=36e5?window.innerWidth<=500?"about ".concat((e/36e5).toFixed(0),"h ago"):"about ".concat((e/36e5).toFixed(0)," hours ago"):void 0}function Se(e){var t=216e5-e,n=Math.floor(t/36e5),a=Number(((t-36e5*n)/6e4).toFixed(0));60===a&&(a=59);var r="";return 1===n&&(r+="1 hour"),n>1&&(r+="".concat(n," hours")),a<=0&&(r+=" left"),1===a&&(r+=r.length?" and 1 minute left":"1 minute left"),a>1&&(r+=r.length?" and ".concat(a," minutes left"):"".concat(a," minutes left"))," left"===r&&(r="time is almost up"),window.innerWidth<=500?r.replace(/(minutes|hours)/gi,(function(e){return e.substring(0,e.length-1)})).replace(/( hour| minute)/gi,(function(e){return e.includes("hour")?"h":"m"})):r}function Ce(e,t,n){return e.map((function(e){var a,l=e.opponentInfo,o=e.home,i=e.away,u=e.shouldPlay,s=e.turn,m=e.updatedAt,f=e.pending,d=e.url;if(f)return r.a.createElement(c.a,{to:"/challenges/".concat(d)},r.a.createElement("div",{className:"challenges--item "+t},r.a.createElement("div",{className:"challenges--item__image-container challenges--item__offline"},r.a.createElement("img",{src:_.a,alt:"Pending Avatar"})),r.a.createElement("div",{className:"challenges--item__meta-data"},r.a.createElement("h3",{className:"challenges--item__name"},"Anonymous"),r.a.createElement("p",null,we(o,i,u,s))),r.a.createElement("div",{className:"challenges--item__time"},r.a.createElement("p",null,Oe(new Date-new Date(m))),r.a.createElement("p",null,Se(new Date-new Date(m))))));return r.a.createElement(c.a,{to:"/challenges/".concat(d)},r.a.createElement("div",{className:(a="challenges--item "+t,"you"===n&&new Date-new Date(m)>198e5?a+=" short-time__danger":"you"===n&&new Date-new Date(m)>18e6&&(a+=" short-time"),a)},r.a.createElement("div",{className:he(l.status,"challenges--item__image-container")},r.a.createElement("img",{src:l.avatar,alt:l.fullName})),r.a.createElement("div",{className:"challenges--item__meta-data"},r.a.createElement("h3",{className:"challenges--item__name"},l.fullName),r.a.createElement("p",null,we(o,i,u,s))),r.a.createElement("div",{className:"challenges--item__time"},r.a.createElement("p",null,Oe(new Date-new Date(m))),r.a.createElement("p",null,Se(new Date-new Date(m))))))}))}function ke(){U({show:!1,type:""}),F(!1)}function qe(){function e(e){te((function(t){return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(S(t),[e])}))}function n(e){var t="inside--container";return t+="online"===e?" challenges--person__online":" challenges--person__offline"}function a(){return t&&t.challenges&&t.challenges.active.length>=20?(fe.current.classList.add("active"),void setTimeout((function(){fe.current.classList.remove("active")}),3e3)):t&&t.userRequestCounter&&t.userRequestCounter.pending+ee.length>=20?(de.current.classList.add("active"),void setTimeout((function(){de.current.classList.remove("active")}),3e3)):(oe({showLoading:!0,loaded:!1}),void R(ee).then((function(){oe({showLoading:!1,loaded:!0})})))}return r.a.createElement("div",{className:"challenges--pop-up__challenge-friend"},r.a.createElement("div",{className:"challenge--friend__container"},r.a.createElement("div",{onClick:function(){U({show:!1,type:""}),oe(!1),te([]),oe({showLoading:!1,loaded:!1})},className:"close--container"},r.a.createElement("img",{src:N.a,alt:"close"})),t&&!t.friends&&r.a.createElement("div",{className:"spinner--container"},r.a.createElement(v.a,null)),t&&(le.showLoading?r.a.createElement("div",{className:"request--sending"},"Sending the request",ee.length>1?"s":"","..."):le.loaded?r.a.createElement("div",{className:"request--sent"},"Request",ee.length>1?"s":""," was sent successfully"):t.friends&&t.friends.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"challenge--friend__header-container"},ee.length>0?r.a.createElement("h3",null,"You've selected ",ee.length," friend",1===ee.length?"":"s"):r.a.createElement("h3",null,"Select friend(s) you want to send a challenge request"),r.a.createElement(u,{content:ae,setContent:re})),r.a.createElement("ul",{className:"challenges--friends__items-group"},t&&t.friends&&t.friends.filter((function(e){return e.username.toLowerCase().includes(ae.toLowerCase())||e.fullName.toLowerCase().includes(ae.toLowerCase())})).map((function(t){var a=t._id,l=t.avatar,o=t.fullName,i=t.username,u=t.status;return r.a.createElement("li",{className:"challenges--friend__item-container"},r.a.createElement("div",{onClick:e.bind(null,a),className:n(u.text)},r.a.createElement("img",{src:l,alt:o}),r.a.createElement("div",{className:"selection--container"},r.a.createElement("img",{className:ee.includes(a)?"selected":void 0,src:b.a,alt:"select"}))),r.a.createElement(c.a,{to:"/profile/".concat(i),className:"name--container"},r.a.createElement("p",null,Object(O.a)(o,10))))}))),r.a.createElement("button",{onClick:a,disabled:ee.length<=0},"Send")):t.friends&&t.friends.length<=0?r.a.createElement("div",{className:"no--friends"},r.a.createElement("div",null,r.a.createElement("p",null,"You don't have any friends"),r.a.createElement("p",null,"Start making some...")),r.a.createElement("img",{src:j.a,alt:"no-friends"})):void 0)))}function Ae(){t&&t.challenges&&t.challenges.active.length+1>20?X&&null!=fe&&fe.current&&(fe.current.classList.add("active"),setTimeout((function(){fe.current.classList.remove("active")}),3e3)):U({show:!0,type:T})}function Re(){U({show:!0,type:L})}return r.a.createElement("div",{className:"challenges--container",style:W.show?{overflow:"hidden",height:"93vh",padding:"1rem 0"}:{}},!t&&r.a.createElement(p.a,null),W.show&&(W.type===T?r.a.createElement("div",{className:"challenges--pop-up__new-challenge"},r.a.createElement("div",{className:"pop-up--data"},r.a.createElement("h3",null,"Searching for an opponent..."),r.a.createElement("button",{className:I?"hide":void 0,onClick:ke},"Cancel")),r.a.createElement("div",{className:"circle circle--one"}),r.a.createElement("div",{className:"circle circle--two"}),r.a.createElement("div",{className:"circle circle--three"}),r.a.createElement("div",{className:"circle circle--four"})):W.type===P?r.a.createElement("div",{className:"challenges--pop-up__warning-container"},r.a.createElement("div",{ref:me,className:"card"},"single"===K.type&&r.a.createElement("p",null,"Are you sure you want to reject the request?"),"all"===K.type&&r.a.createElement("p",null,"Are you sure you want to reject all the requests?"),r.a.createElement("div",{className:"btn--container"},r.a.createElement("button",{onClick:function(){Q((function(e){return k(k({},e),{},{bool:!0})})),U({show:!1,type:""})},className:"yes"},"Yes"),r.a.createElement("button",{onClick:function(){Q({bool:!1,type:"",id:""}),U({show:!1,type:""})},className:"no"},"No")))):W.type===L?qe():void 0),r.a.createElement("div",{className:"challenges--header__btn-container--two"},r.a.createElement("div",{onClick:Ae},r.a.createElement("img",{src:y,alt:"start a challenge"}),"New Challenge"),r.a.createElement("div",{onClick:Re},r.a.createElement("img",{src:E,alt:"challenge a friend"}),"Challenge a Friend")),r.a.createElement("div",{className:"challenges--top-temp__container"},t&&t.requests&&(!t.requests.length&&window.innerWidth<=600?null:r.a.createElement("div",{className:"challenges--requests__container"},t.requests.length<=0?r.a.createElement("p",{className:"no-result"},"no game request to show"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,t.requests.length," Challenge Request",t.requests.length>1?"s":""),r.a.createElement("ul",{className:"challenges--requests-group"},t.requests.map((function(e){var t,n,a=e._id,l=e.level,o=e.totalScore,i=e.username,u=e.status,s=e.avatar;return r.a.createElement("li",{className:(t=a,n="challenges--request-item",(z[0]&&"all"===z[1]||z[0]&&z[1]===t)&&(n+=" close"),n)},r.a.createElement("div",{className:"challenges--request__info-container"},r.a.createElement("div",null,r.a.createElement("p",null,"Level"),r.a.createElement("p",null,Object(f.a)(l))),r.a.createElement("div",null,r.a.createElement("p",null,"Score"),r.a.createElement("p",null,Object(f.a)(o)))),r.a.createElement(c.a,{to:"/profile/".concat(i),className:he(u,"challenges--request__img-container")},r.a.createElement("img",{src:s,title:i,alt:i}),r.a.createElement("div",{className:"hover"},r.a.createElement(c.a,{to:"/profile/".concat(i)},Object(O.a)(i,15)))),r.a.createElement("div",{className:"challenges--request__btn-container"},r.a.createElement("img",{onClick:ve.bind(null,a),src:b.a,alt:"confirm"}),r.a.createElement("img",{onClick:ge.bind(null,a),src:w.a,alt:"reject"})))}))),r.a.createElement("div",{onClick:pe,className:"challenges--close"},r.a.createElement("p",null,"Reject All"),ue&&r.a.createElement("div",{className:"spinner--container"},r.a.createElement(v.a,null)))))),t&&(!(je=t.challenges.inactive.filter((function(e){return!e.close}))).length&&window.innerWidth<=600?null:r.a.createElement("div",{className:"challenges--results__container"},je.length<=0?r.a.createElement("p",{className:"no-result"},"no game result to show"):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Results"),be(je),r.a.createElement("div",{onClick:Ee.bind(null,"all"),className:"challenges--close"},r.a.createElement("p",null,"Clear All")))))),r.a.createElement("div",{ref:fe,className:"challenges--warning-container"},r.a.createElement("p",null,"Sorry, but your active challenges are getting too much!"),r.a.createElement("p",null,"Finish some of them and try again!")),r.a.createElement("div",{ref:de,className:"challenges--warning-container"},r.a.createElement("p",null,"Sorry, but the number of your requests are getting too much!"),r.a.createElement("p",null,"Please try again later")),r.a.createElement("div",{className:"challenges--header__btn-container"},r.a.createElement("div",{onClick:Ae},r.a.createElement("img",{src:y,alt:"start a challenge"}),"New Challenge"),r.a.createElement("div",{onClick:Re},r.a.createElement("img",{src:E,alt:"challenge a friend"}),"Challenge a Friend")),t&&(Ne=t.challenges.active.filter((function(e){return e.shouldPlay})),_e=t.challenges.active.filter((function(e){return!e.shouldPlay})),r.a.createElement(r.a.Fragment,null,Ne.length>0&&r.a.createElement("div",{className:"challenges--your-turn-container"},r.a.createElement("div",{className:"challenges--header-container"},r.a.createElement("h2",null,"Your Turn")),r.a.createElement("div",{className:"challenges--body-container"},!t.pending&&Ce(Ne,"challenges--item__your","you"))),_e.length>0&&r.a.createElement("div",{className:"challenges--opponent-turn-container"},r.a.createElement("div",{className:"challenges--header-container"},r.a.createElement("h2",null,"Opponent's Turn")),r.a.createElement("div",{className:"challenges--body-container"},!t.pending&&Ce(_e,"challenges--item__opponent","opponent"))))))})))}}]);