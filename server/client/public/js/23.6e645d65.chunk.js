(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{478:function(e,n,t){"use strict";var a=t(118),r=t.n(a);var c=function(){var e=navigator.userAgent;return e.match(/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i)?"tablet":e.match(/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/)?"mobile":"desktop"};var l=function(e){var n=new(window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection)({iceServers:[]}),t=function(){},a={},r=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g;function c(n){a[n]||e(n),a[n]=!0}n.createDataChannel(""),n.createOffer().then((function(e){e.sdp.split("\n").forEach((function(e){e.indexOf("candidate")<0||e.match(r).forEach(c)})),n.setLocalDescription(e,t,t)})).catch((function(e){})),n.onicecandidate=function(e){e&&e.candidate&&e.candidate.candidate&&e.candidate.candidate.match(r)&&e.candidate.candidate.match(r).forEach(c)}};n.a=function(){var e=r.a.connect("/pageview",{transports:["websocket"],upgrade:!1});return e.on("connect",(function(){})),e.on("visitorConnected",(function(){var n={pageviewUrl:window.location.pathname,httpReferer:document.referrer,deviceType:c()};l((function(t){n.ip||(n.ip=t,fetch("/api/pageview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(n){e.emit("viewData",n.data)})))}))})),e}},479:function(e,n,t){"use strict";var a=t(0),r=t.n(a),c=t(65),l=t(10),i=t(156);function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function t(t){var a=t.identifier,c=o(t,["identifier"]);return a?a.NotAuthorizedError?(i.a.push("/sign-in"),r.a.createElement("div",null,"Redirecting...")):a.FetchError?r.a.createElement(l.a,{text:"Unable to fetch data. Try again"}):a.name||n?a.text||!a.name&&n?r.a.createElement(e,c):r.a.createElement(l.a,null):(i.a.push("/settings/profile"),r.a.createElement("div",null,"Redirecting...")):r.a.createElement(l.a,null)}function a(e){return{identifier:e.identifier}}return Object(c.b)(a,null)(r.a.memo(t))}},480:function(e,n,t){"use strict";var a=t(0),r=t.n(a);n.a=function(){return r.a.createElement("div",{className:"spinner"})}},481:function(e,n,t){"use strict";n.a=function(e){var n,t=!1;Number(e)<0&&(t=!0),n=t?Number(e).toString().split("").slice(1):Number(e).toString().split("");for(var a=[],r=0;n.length;)a.unshift(n.pop()),++r>=3&&(a.unshift(","),r=0);var c=a.join("").replace(/(^,|,$)/g,"");return t?"-"+c:c}},486:function(e,n,t){"use strict";n.a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(null==e?void 0:e.length)>=n?e.substr(0,n-3)+"...":e}},503:function(e,n,t){"use strict";t.d(n,"g",(function(){return s})),t.d(n,"e",(function(){return f})),t.d(n,"c",(function(){return m})),t.d(n,"h",(function(){return d})),t.d(n,"f",(function(){return g})),t.d(n,"b",(function(){return h})),t.d(n,"j",(function(){return p})),t.d(n,"k",(function(){return v})),t.d(n,"n",(function(){return E})),t.d(n,"o",(function(){return y})),t.d(n,"d",(function(){return b})),t.d(n,"l",(function(){return I})),t.d(n,"a",(function(){return N})),t.d(n,"i",(function(){return j})),t.d(n,"m",(function(){return w}));var a=t(25),r=t(39);function c(e,n,t){return t?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e)}function l(){}function i(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}function o(e){if(e&&e.then)return e.then(l)}function u(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(e.apply(this,n))}catch(e){return Promise.reject(e)}}}var s=function(){return u((function(e){return o(i((function(){return c(fetch("/api/challenge"),(function(n){return c(n.json(),(function(n){e({type:a.g,payload:n})}))}))}),l))}))},f=function(){return u((function(e){return o(i((function(){return c(fetch("/api/challenge/start"),(function(n){return c(n.json(),(function(n){e({type:a.e,payload:n.data}),e({type:r.c})}))}))}),l))}))},m=function(){return u((function(e){return e({type:a.c}),c()}))},d=function(e){return u((function(n){return o(i((function(){return c(fetch("/api/challenge/".concat(e)),(function(e){return c(e.json(),(function(e){n({type:a.h,payload:e})}))}))}),l))}))},g=function(e,n){return u((function(t){return o(i((function(){return c(fetch("/api/challenge/play/".concat(e,"/").concat(n)),(function(e){return c(e.json(),(function(e){t({type:a.f,payload:"".concat(e.userId,"/").concat(e.gameId)})}))}))}),l))}))},h=function(){return u((function(e){try{e({type:a.b})}catch(e){}return c()}))},p=function(e,n){return u((function(t){return o(i((function(){return c(fetch("/api/challenge/game/".concat(e,"/").concat(n)),(function(e){return c(e.json(),(function(e){t({type:a.j,payload:e})}))}))}),l))}))},v=function(e,n){return u((function(t,l){return o(i((function(){var i=l().sockets.status;return i&&n&&i.emit("challenge-turn",{toUsername:n}),t({type:r.c,payload:"decrement"}),c(fetch("/api/challenge/gameAnalysis/challenge/".concat(e)),(function(e){return c(e.json(),(function(e){e.Error?t({type:a.k,payload:{Error:!0}}):t({type:a.k,payload:e})}))}))}),(function(){t({type:a.k,payload:{Error:!0}})})))}))},E=function(){return u((function(e){try{e({type:a.m})}catch(e){}return c()}))},y=function(){return u((function(e){return e({type:a.n}),c()}))},b=function(e){return u((function(n){return o(i((function(){return c(fetch("/api/challenge/results/".concat(e)),(function(t){n({type:a.d,payload:e})}))}),l))}))},I=function(e){return u((function(n){return o(i((function(){return c(fetch("/api/challenge/request/".concat(e),{method:"DELETE"}),(function(t){n({type:a.l,payload:e}),n({type:r.b,payload:"decrement"})}))}),l))}))},N=function(e){return u((function(n){return o(i((function(){return c(fetch("/api/challenge/request/".concat(e)),(function(t){return c(t.json(),(function(t){n({type:a.a,payload:{id:e,data:t}}),n({type:r.b,payload:"decrement"}),n({type:r.c})}))}))}),l))}))},j=function(){return u((function(e){return o(i((function(){return c(fetch("/api/friend/data/friends"),(function(n){return c(n.json(),(function(n){e({type:a.i,payload:n})}))}))}),l))}))},w=function(e){return u((function(n,t){return o(i((function(){return c(fetch("/api/challenge/request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),(function(e){return c(e.json(),(function(e){if(e.Message){var n=t().sockets.status;if(n){var a=e.Message.split(" "),r=".."===a[a.length-1],c=JSON.parse(a[a.length-2]);r&&c.forEach((function(e){n.emit("challenge-request",{toUsername:e})}))}}}))}))}),l))}))}},743:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(65),l=t(66),i=t(503),o=t(481),u=t(156),s=t(486),f=t(479),m=t(157),d=t(478),g=t(10),h=t(480),p=t.p+"images/play.6dd35183b239a7bb0771d3020f6a7b19.svg",v=t.p+"images/hourglass.ab5715e384ef2e155257cfdc21c53b6e.svg",E=t.p+"images/finish.470f979ad1514bd1a2052deeb8f20320.svg",y=t.p+"images/question.265092aedf4bcdd5b8bd6b1cdd822681.svg",b=t.p+"images/gold-medal.fb8244a60d8ae529df845231641bbcd0.svg",I=t.p+"images/silver-medal.4bf2417d5e9038230ffa8422ce34c0e2.svg",N=t.p+"images/draw.f995559a9e11aed3edc3562c9cddd3e7.svg";function j(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],a=!0,r=!1,c=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(t.push(l.value),!n||t.length!==n);a=!0);}catch(e){r=!0,c=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}n.default=Object(f.a)(Object(c.b)((function(e){return{challengeInsideData:e.challenges.inside}}),{fetchChallengeInsideData:i.h,createGame:i.f})((function(e){var n,t=e.match,c=e.challengeInsideData,i=e.fetchChallengeInsideData,f=e.challengeInsideReFetch,w=e.createGame,_=j(Object(a.useState)(!1),2),O=_[0],R=_[1];function S(e,n){return e/(e+n)*100}function k(e){return e.gamesInRounds.reduce((function(e,n){return e+n.score}),0)}function C(e){return"win"===e?b:"lose"===e?I:N}function A(){w(t.params.id,c.challengeInfo.username),R(!0)}return Object(a.useEffect)((function(){document.title="Adasik - Challenge Match",i(t.params.id);var e=Object(d.a)();return function(){e.disconnect(),R(!1)}}),[]),Object(a.useEffect)((function(){f&&f[0]&&i(t.params.id)}),[f]),Object(a.useEffect)((function(){c&&c.redirect&&u.a.push("/challenges/".concat(c.redirect))}),[c]),r.a.createElement("div",{className:"challenge--container"},!c&&r.a.createElement(g.a,null),c&&c.challengeInfo&&!c.Error&&function(){var e=c.challengeInfo,n=e.home,t=e.away,a=e.endType,i=function(e,n){return e&&e.gamesInRounds.filter((function(e){return e.finish})).length&&n&&n.gamesInRounds.filter((function(e){return e.finish})).length?S(e.gamesInRounds.filter((function(e){return e.finish})).reduce((function(e,n){return e+n.score}),0),n.gamesInRounds.filter((function(e){return e.finish})).reduce((function(e,n){return e+n.score}),0)):50}(n,t);function u(e){var n="challenge--header__avatar-container";return n+="online"===e?" challenge--item__online":" challenge--item__offline"}return c&&!c.challengeInfo.away.userInfo&&(c.challengeInfo.away.userInfo={avatar:"/images/user.4a895b672114f74207a1dd182ad35838.svg",level:0,status:{text:"offline",date:"2021-01-31T09:35:15.574Z"},totalScore:0,username:"Anonymous"}),r.a.createElement("div",{className:"challenge--header-container",style:{backgroundImage:"linear-gradient(45deg, #6b0f1a 0%, #b91372 ".concat(i,"%, #ffdd00 ").concat(i,"%, #fbb034 100%)")}},a&&function(){if(a&&"time"===a){var e="lose"===n.result?n.userInfo.username:t.userInfo.username;return r.a.createElement("div",{className:"challenge--lost-on-time__container"},e," lost on time")}}(),r.a.createElement("div",{className:"challenge--header__left-container"},r.a.createElement("div",{className:u(n.userInfo.status.text)},r.a.createElement(l.a,{to:"/profile/".concat(n.userInfo.username)},r.a.createElement("img",{src:n.userInfo.avatar,alt:n.userInfo.username}))),r.a.createElement("div",{className:"challenge--username-container",style:c.challengeInfo.result?{padding:"1.3rem 4rem 1rem 4.5rem"}:{}},r.a.createElement(l.a,{to:"/profile/".concat(n.userInfo.username)},c.challengeInfo.result?r.a.createElement("p",{className:"increment",style:n.increment<0?{color:"#f1acfa"}:{color:"#05ff05"}},n.increment>=0?"+"+n.increment:n.increment):void 0,r.a.createElement("p",null,Object(s.a)(n.userInfo.username,10)))),c.challengeInfo.result?r.a.createElement("div",{className:"challenge--badge-container"},r.a.createElement("img",{src:C(n.result),alt:n.result})):void 0,r.a.createElement("div",{className:"challenge--level-container"},r.a.createElement("p",null,Object(o.a)(n.userInfo.level))),r.a.createElement("div",{className:"challenge--total-score-container"},r.a.createElement("p",null,Object(o.a)(n.userInfo.totalScore))),r.a.createElement("div",{className:"challenge--score-container"},r.a.createElement("p",null,Object(o.a)(k(n))))),r.a.createElement("div",{className:"challenge--header__right-container"},r.a.createElement("div",{className:"challenge--username-container",style:c.challengeInfo.result?{padding:"1.3rem 4.5rem 1rem 4rem"}:{}},r.a.createElement(l.a,{to:"/profile/".concat("Anonymous"===t.userInfo.username?"#":t.userInfo.username)},c.challengeInfo.result?r.a.createElement("p",{className:"increment",style:t.increment<0?{color:"#f1acfa"}:{color:"#05ff05"}},t.increment>=0?"+"+t.increment:t.increment):void 0,r.a.createElement("p",null,Object(s.a)(t.userInfo.username,10)))),c.challengeInfo.result?r.a.createElement("div",{className:"challenge--badge-container"},r.a.createElement("img",{src:C(t.result),alt:t.result})):void 0,r.a.createElement("div",{className:"challenge--level-container"},r.a.createElement("p",null,Object(o.a)(t.userInfo.level))),r.a.createElement("div",{className:"challenge--total-score-container"},r.a.createElement("p",null,Object(o.a)(t.userInfo.totalScore))),r.a.createElement("div",{className:"challenge--score-container",style:{left:62-2.4*Object(o.a)(k(t)).length-5+"%"}},r.a.createElement("p",null,Object(o.a)(k(t)))),r.a.createElement("div",{className:u(t.userInfo.status.text)},r.a.createElement(l.a,{to:"/profile/".concat("Anonymous"===t.userInfo.username?"#":t.userInfo.username)},r.a.createElement("img",{src:t.userInfo.avatar,alt:t.userInfo.username})))))}(),c&&c.Error&&r.a.createElement(m.a,{text:"Challenge Not Found!"}),r.a.createElement("div",{className:"challenge--body-container"},c&&c.challengeInfo&&!c.Error&&function(){for(var e=[],n=c.challengeInfo,t=n.home,a=n.away,l=0;l<3;l++){var i=void 0,u=void 0,f=void 0;if(t.gamesInRounds[l]&&t.gamesInRounds[l].finish||(i=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"challenge--item__score-container inactive"},r.a.createElement("p",null,"-")),r.a.createElement("div",{className:"challenge--item__left inactive",style:{width:"50rem"}}))),a.gamesInRounds[l]&&a.gamesInRounds[l].finish||(u=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"challenge--item__right inactive",style:{width:"50rem"}}),r.a.createElement("div",{className:"challenge--item__score-container inactive"},r.a.createElement("p",null,"-")))),t.gamesInRounds[l]||t.gamesInRounds[l]||(f=r.a.createElement("div",{className:"challenge--item__center inactive"},r.a.createElement("div",null,r.a.createElement("img",{src:y,alt:"unknown game"}),r.a.createElement("p",null,"Unknown")))),(t.gamesInRounds[l]||a.gamesInRounds[l])&&(f=r.a.createElement("div",{className:"challenge--item__center"},r.a.createElement("div",null,r.a.createElement("img",{src:t.gamesInRounds[l].gameInfo.icon,alt:t.gamesInRounds[l].gameInfo.name}),r.a.createElement("p",null,Object(s.a)(t.gamesInRounds[l].gameInfo.name,16))))),t.gamesInRounds[l]&&t.gamesInRounds[l].finish&&a.gamesInRounds[l]&&!a.gamesInRounds[l].finish&&(i=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"challenge--item__score-container"},r.a.createElement("p",null,Object(o.a)(t.gamesInRounds[l].score))),r.a.createElement("div",{className:"challenge--item__left",style:{width:"50rem"}}))),t.gamesInRounds[l]&&t.gamesInRounds[l].finish&&a.gamesInRounds[l]&&a.gamesInRounds[l].finish){var m=S(t.gamesInRounds[l].score,a.gamesInRounds[l].score);i=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"challenge--item__score-container"},r.a.createElement("p",null,Object(o.a)(t.gamesInRounds[l].score))),r.a.createElement("div",{className:"challenge--item__left",style:{width:m.toString()+"rem"}})),u=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"challenge--item__right",style:{width:(100-m).toString()+"rem"}}),r.a.createElement("div",{className:"challenge--item__score-container"},r.a.createElement("p",null,Object(o.a)(a.gamesInRounds[l].score))))}e.push(r.a.createElement("div",{className:"challenge--item-container"},i,f,u))}return e}(),r.a.createElement("div",{className:"challenge--btn-container"},c&&c.challengeInfo&&!c.Error&&((n=c.challengeInfo).result?r.a.createElement("div",{className:"challenge--btn challenge--btn__finish"},r.a.createElement("img",{src:E,alt:"finish"})):n.shouldPlay?r.a.createElement("div",{onClick:A,className:"challenge--btn challenge--btn__play"},O?r.a.createElement("div",{className:"spinner--container"},r.a.createElement(h.a,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Play"),r.a.createElement("img",{src:p,alt:"play"}))):n.shouldPlay||n.visitor?r.a.createElement("div",{className:"challenge--btn challenge--btn__watching"},r.a.createElement("span",null,"Challenge Is In Progress"),r.a.createElement("img",{src:v,alt:"watching"})):r.a.createElement("div",{className:"challenge--btn challenge--btn__waiting"},r.a.createElement("span",null,"Opponent's Turn"),r.a.createElement("img",{src:v,alt:"hourglass"}))))))})))}}]);